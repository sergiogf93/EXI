<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - core/util/bui.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>core/util/bui.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">66.74</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">1082</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">65.67</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">10.89</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">var BUI = {
	//interval : 60000,
	interval : 40000,
	rainbow : function(numOfSteps, step) {
		// This function generates vibrant, &quot;evenly spaced&quot; colours (i.e. no clustering). This is ideal for creating easily distinguishable vibrant markers in Google Maps and other apps.
		// Adam Cole, 2011-Sept-14
		// HSV to RBG adapted from: http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript
		var r, g, b;
		var h = step / numOfSteps;
		var i = ~~(h * 6);
		var f = h * 6 - i;
		var q = 1 - f;
		switch (i % 6) {
			case 0:
				r = 1; g = f; b = 0;
				break;
			case 1:
				r = q; g = 1; b = 0;
				break;
			case 2:
				r = 0; g = 1; b = f;
				break;
			case 3:
				r = 0; g = q; b = 1;
				break;
			case 4:
				r = f; g = 0; b = 1;
				break;
			case 5:
				r = 1; g = 0; b = q;
				break;
		}
		var c = &quot;#&quot; + (&quot;00&quot; + (~~(r * 255)).toString(16)).slice(-2) + (&quot;00&quot; + (~~(g * 255)).toString(16)).slice(-2) + (&quot;00&quot; + (~~(b * 255)).toString(16)).slice(-2);
		return (c);
	},
	groupBy : function(array , f ){
		/**
		 * Groups an array based on a function
		 * Example:
		 * 		data =  this.groupBy(data, function(item){
		 * 			return [item.bufferAcronym];
		 *		});
		 * 
		 */
		  var groups = {};
		  array.forEach( function( o )
		  {
		    var group = JSON.stringify( f(o) );
		    groups[group] = groups[group] || [];
		    groups[group].push( o );  
		  });
		  return Object.keys(groups).map( function( group ){
			  return groups[group]; 
		  });
	},
		
	getFileNameByPath : function(filePath) {
		if (filePath != null){
			var split = filePath.split(&quot;/&quot;);
			if (split.length &gt; 0){
				return split[split.length - 1];
			}
		}
		return &quot;Not file&quot;;
	},
	getUpdateInterval : function() {
		this.interval = this.interval + 2000;
		return this.interval;
	},
	getRadiationDamageThreshold : function() {
		return 0.7;
	},
	getQualityThreshold : function() {
		return 0.7;
	},
	getCreateShipmentURL : function() {
		return &#039;/ispyb/user/viewProjectList.do?reqCode=display&amp;menu=create_shipment&#039;;
	},
	getCreateShipmentList : function() {
		return &#039;/ispyb/user/viewProjectList.do?reqCode=display&amp;menu=list_shipment&#039;;
	},
	getShippingURL : function(shippingId) {
		return &#039;/ispyb/user/viewProjectList.do?reqCode=display&amp;menu=shipment&amp;shippingId=&#039; + shippingId;
	},

	getMacromoleculeResultsURLByMultipleSearch : function(array) {
		return &#039;/ispyb/user/viewProjectList.do?reqCode=display&amp;menu=macromolecule&amp;search=&#039; +
		        JSON.stringify(array).replace(new RegExp(&quot;\&quot;&quot;, &#039;g&#039;), &quot;&#039;&quot;);
	},
	getMacromoleculeResultsURL : function(macromoleculeId) {
		return &#039;/ispyb/user/viewProjectList.do?reqCode=display&amp;menu=macromolecule&amp;macromoleculeId=&#039; + macromoleculeId;
	},
	getMacromoleculeBufferResultsURL : function(macromoleculeId, bufferId) {
		return &#039;/ispyb/user/viewProjectList.do?reqCode=display&amp;menu=macromolecule&amp;bufferId=&#039; + bufferId + &#039;&amp;macromoleculeId=&#039; + macromoleculeId;
	},

	getMacromoleculeHeader : function(macromoleculeId) {

		function getHTMLSource(macromoleculeId) {
			if (macromoleculeId != null) {
				var html = BUI.createFormLabel(&quot;Name :&quot;, BIOSAXS.proposal.getMacromoleculeById(macromoleculeId).name, 75, 400);
				html = html + BUI.createFormLabel(&quot;Acronym :&quot;, BIOSAXS.proposal.getMacromoleculeById(macromoleculeId).acronym, 75, 400);
				if (BIOSAXS.proposal.getMacromoleculeById(macromoleculeId).comments != null) {
					html = html + BUI.createFormLabel(&quot;Comments :&quot;, BIOSAXS.proposal.getMacromoleculeById(macromoleculeId).comments, 75, 400);
				}
				return html;
			}
		}

		return Ext.create(&#039;Ext.container.Container&#039;, {
			frame : false,
			layout : &#039;hbox&#039;,
			title : &#039;Macromolecule&#039;,
			bodyPadding : &#039;5&#039;,
			width : 890,
			margin : &#039;0 0 10 0&#039;,
			height : 100,
			style : {
				borderColor : &#039;#BDBDBD&#039;,
				borderStyle : &#039;solid&#039;,
				borderWidth : &#039;1px&#039;
			},
			fieldDefaults : {
				msgTarget : &#039;side&#039;,
				labelWidth : 100
			},
			items : [ {
				margin : &quot;10 0 0 10&quot;,
				width : 475,
				border : 0,
				html : getHTMLSource(macromoleculeId)
			}, {
				margin : &quot;10 0 0 10&quot;,
				width : 475,
				border : 0,
				html : BUI.getZipHTMLByMacromoleculeId(macromoleculeId)
			}
			]
		});
	},

	getZipHTMLByMacromoleculeId : function(macromoleculeId) {
		if (macromoleculeId != null) {
			var fileName = BIOSAXS.proposal.getMacromoleculeById(macromoleculeId).acronym;
			return &quot;&lt;div&gt;&lt;a style=&#039;color:blue;&#039; href=&#039;/ispyb/user/dataadapter.do?reqCode=getZipFileByMacromoleculeId&amp;fileName=&quot; + fileName +
				&quot;&amp;macromoleculeId=&quot; + macromoleculeId + &quot;&#039;&gt;&lt;img src=&#039;../images/download.png&#039; /&gt; Download&lt;/a&gt;&lt;/div&gt;&quot;;
		}
	},
	getZipHTMLByExperimentId : function(experimentId, filename) {
		if (filename == null){
			filename = &quot;experiment&quot;;
		}
		return &quot;&lt;div&gt;&lt;a style=&#039;color:blue;&#039; href=&#039;/ispyb/user/dataadapter.do?reqCode=getZipFileByExperimentId&amp;fileName=&quot; + filename +
		       &quot;&amp;experimentId=&quot; + experimentId + &quot;&#039;&gt;&lt;img src=&#039;../images/download.png&#039; /&gt; Download&lt;/a&gt;&lt;/div&gt;&quot;;
	},
	
	getZipURLByAverageId : function(averageId, filename) {
		if (filename == null){
			filename = &quot;experiment&quot;;
		}
		return &quot;/ispyb/user/dataadapter.do?reqCode=getZipFileByAverageListId&amp;f&amp;mergeIdsList=&quot; + averageId + &quot;&amp;fileName=&quot; + filename;
	},
	getZipURLBySubtractionId : function(subtractionId, filename) {
		if (filename == null){
			filename = &quot;experiment&quot;;
		}
		return &quot;/ispyb/user/dataadapter.do?reqCode=getZipFileByAverageListId&amp;f&amp;subtractionIdList=&quot; + subtractionId + &quot;&amp;fileName=&quot; + filename;
	},
	
	
	getZipHTMLByFrameRangeId : function(experimentId, start, end) {
		var fileName = &quot;experiment&quot;;
		return &quot;&lt;div&gt;&lt;a style=&#039;color:blue;&#039; href=&#039;/ispyb/user/dataadapter.do?reqCode=getZipFileH5ByFramesRange&amp;f&amp;experimentId=&quot; + experimentId + 
		       &quot;&amp;start=&quot; + Number(start) +&quot;&amp;end=&quot;+ Number(end)+&quot;&#039;&gt;&lt;img src=&#039;../images/download.png&#039; /&gt; Download&lt;/a&gt;&lt;/div&gt;&quot;;
	},
	getZipFrameHPLCUrl : function(experimentId, start, end) {
		return &quot;/ispyb/user/dataadapter.do?reqCode=getZipFileH5ByFramesRange&amp;f&amp;experimentId=&quot; + experimentId + &quot;&amp;start=&quot; + Number(start) +&quot;&amp;end=&quot;+ Number(end);
	},
	
	getQueueUrl : function() {
		return &quot;/ispyb/user/dataadapter.do?reqCode=getPagingCompactAnalysisByProposalId&quot;;
	},
	
	getQueueUrlByExperiment: function(experimentId) {
		return &quot;/ispyb/user/dataadapter.do?reqCode=getPagingCompactAnalysisByExperimentId&amp;f&amp;experimentId=&quot; + experimentId;
	},
	getStandardDeviation : function(values) {
		var sum = 0;
		var count = 0;
		var avg = null;

		var curatedValues = [];
		for ( var i = 0; i &lt; values.length; i++) {
			var value = values[i];
			if (value != null) {
				if (!isNaN(value)) {
					count = count + 1;
					sum = sum + Number(value);
					curatedValues.push(Number(value));
				}
			}
		}

		if (count &gt; 0) {
			avg = sum / count;
		} else {
			avg = sum;
		}
		var aux = 0;
		for ( i = 0; i &lt; curatedValues.length; i++) {
			aux = aux + Math.pow(curatedValues[i] - avg, 2);
		}
		/** std **/
		var std = Math.sqrt(aux / count);
		return {
			std : (std),
			sum : (sum),
			avg : (avg),
			validNumber : count,
			totalNumber : values.length,
			values : values
		};
	},
	
	getHTMLTableForFrameAveraged : function(bufferAcronym, macromoleculeAcronym, bbmerges, molmerges, bamerges, totalframes, bufferId,macromoleculeId, macromoleculeColor) {
		
		function getFrameSpan(framesMerged, total) {
			return &quot;&lt;td style=&#039;font:normal 9px tahoma,arial,verdana,sans-serif;color:&quot; + &quot;black&quot; + &quot;&#039;&gt;(&quot; + framesMerged + &quot; of &quot; + total + &quot;)&lt;/td&gt;&quot;;
		}

		function getColorFrame(framesMerged, total) {
			if (framesMerged / total &lt; 0.5) {
				return &quot;#FA5858&quot;;
			}
			if ((framesMerged / total &gt;= 0.5) &amp;&amp; (framesMerged / total &lt; 0.8)) {
				return &quot;#FF9900&quot;;
			}
			return &quot;white&quot;;
		}

		function getRow(color, acroynm, framesMerged, totalframes) {
			return 	&quot;&lt;tr style=&#039;background-color:&quot; +
					getColorFrame(framesMerged, totalframes) +
					&quot;;height:12px;padding:1px;&#039;&gt;&lt;td style=&#039; width:10px; height:10px;&#039;&gt; &quot;  +
					BUI.getRectangleColorDIV(color, 10, 10) +
					&quot;&lt;/td&gt; &lt;td style=&#039;padding:5px;&#039;&gt; &quot; + acroynm + &quot;&lt;/td&gt;&quot; +
					getFrameSpan(framesMerged, totalframes) + &quot;&lt;/tr&gt;&quot;;
		}

		var html = &quot;&lt;table style=&#039;margin: 1,1,1,1;width:100%;font:normal 10px tahoma,arial,verdana,sans-serif;&#039;&gt;&quot;;

		/** Buffer Before **/
		if (bufferAcronym != null) {
			if (bbmerges != null) {
				color = BIOSAXS.proposal.bufferColors[bufferId];
				html = html + getRow(color, bufferAcronym, bbmerges, totalframes);
			}
		}

		/** Molecule **/
		if (macromoleculeAcronym != null) {
			if (molmerges != null) {
				if (macromoleculeColor == null){
					color = BIOSAXS.proposal.macromoleculeColors[macromoleculeId];
				}
				else{
					color = macromoleculeColor; //BIOSAXS.proposal.macromoleculeColors[macromoleculeId];
				}
				html = html + getRow(color, macromoleculeAcronym, molmerges, totalframes);
			}
		}

		/** Buffer After **/
		if (bufferAcronym != null) {
			if (bamerges != null) {
				color = BIOSAXS.proposal.bufferColors[bufferId];
				html = html + getRow(color, bufferAcronym, bamerges, totalframes);
			}
		}
		return html + &quot;&lt;/table&gt;&quot;;
	},
	isWebGLEnabled : function(return_context) {
		if (!!window.WebGLRenderingContext) {
			var canvas = document.createElement(&quot;canvas&quot;);
			names = [ &quot;webgl&quot;, &quot;experimental-webgl&quot;, &quot;moz-webgl&quot;, &quot;webkit-3d&quot; ];
			context = false;
			for ( var i = 0; i &lt; 4; i++) {
				try {
					context = canvas.getContext(names[i]);
					if (context &amp;&amp; typeof context.getParameter == &quot;function&quot;) {
						// WebGL is enabled                    
						if (return_context) {
							// return WebGL object if the function&#039;s argument is present
							return {
								name : names[i],
								gl : context
							};
						}
						// else, return just true
						return true;
					}
				} catch (e) {
				}
			}
			// WebGL is supported, but disabled
			return false;
		}
		// WebGL not supported28.    
		return false;
	},
	getHTMLTableForPrefixes : function(bufferBeforeaverageFilePath, averageFilePath, bufferAfterAverageFilePath) {

		function getRow(bufferBeforeaverageFilePath) {
			file = bufferBeforeaverageFilePath;
			try {
				file = bufferBeforeaverageFilePath.split(&quot;/&quot;)[bufferBeforeaverageFilePath.split(&quot;/&quot;).length - 1];
			} catch (e) {
				file = &quot;NA&quot;;
			}
			return &quot;&lt;tr&gt;&lt;td  style=&#039;height:12px;padding:5px;&#039;&gt;&quot; + file + &quot;&lt;/td&gt;&lt;/tr&gt;&quot;;
		}
		var html = &quot;&lt;table style=&#039;margin: 1,1,1,1;width:100%;font:normal 10px tahoma,arial,verdana,sans-serif;&#039;&gt;&quot;;

		/** Buffer Before **/
		if (bufferBeforeaverageFilePath != null) {
			html = html + getRow(bufferBeforeaverageFilePath);
		}

		/** Molecule **/
		if (averageFilePath != null) {
			html = html + getRow(averageFilePath);
		}

		/** Buffer After **/
		if (bufferAfterAverageFilePath != null) {
			html = html + getRow(bufferAfterAverageFilePath);
		}
		return html + &quot;&lt;/table&gt;&quot;;
	},

	getBaseURL : function() {
		return &#039;/ispyb/user/dataadapter.do&#039;;
	},

	getPrintcomponentURL : function(dewarId) {
		return &#039;/ispyb/user/viewDewarAction.do?reqCode=generateLabels&amp;dewarId=&#039; + dewarId;

	},
	getPDBVisualizerURL : function(modelId, subtractionId, experimentId) {
		return &#039;/ispyb/user/viewProjectList.do?reqCode=display&amp;menu=PDBVisualizer&amp;modelId=&#039; + modelId + &#039;&amp;experimentId=&#039; + experimentId +
			&#039;&amp;subtractionId=&#039; + subtractionId;
	},

	getURL : function() {
		return this.getBaseURL() + &#039;?reqCode=getImage&#039;;

	},
	getAbinitioImageURL : function() {
		return this.getBaseURL() + &#039;?reqCode=getAbinitioImage&#039;;
	},
	getNSDImageURL : function(modelListId) {
		return BUI.getAbinitioImageURL() + &#039;&amp;type=NSD&amp;modelListId=&#039; + modelListId;
	},
	getCHI2ImageURL : function(modelListId) {
		return BUI.getAbinitioImageURL() + &#039;&amp;type=CHI2&amp;modelListId=&#039; + modelListId;
	},
	getModelFile : function(type, modelId, format) {
		return this.getBaseURL() + &#039;?reqCode=getModelFile&#039; + &quot;&amp;type=&quot; + type + &quot;&amp;modelId=&quot; + modelId + &quot;&amp;format=&quot; + format;
	},
	getPdbURL : function() {
		return this.getBaseURL() + &#039;?reqCode=getPdbFiles&#039;;
	},
	getStvArray : function(value, error) {
		value = Number(value);
		error = Number(error);
		return [ value - error, value, value + error ];
	},
	getPointArrayForDygraph : function(x, y, error) {
		return [ x, BUI.getStvArray(y, error) ];
	},
	createDIV : function(text, width, className, backgroundColor) {
		var nameContainer = document.createElement(&quot;div&quot;);
		var nameSpan = document.createElement(&quot;span&quot;);
		if (className != null) {
			nameSpan.setAttribute(&quot;class&quot;, className);
		}
		if (backgroundColor != null) {
			nameSpan.setAttribute(&quot;style&quot;, &quot;float:left;width:&quot; + width + &quot;px;height:18px;background-color:&quot; + backgroundColor);
		} else {
			nameSpan.setAttribute(&quot;style&quot;, &quot;float:left;width:&quot; + width + &quot;px;height:18px;&quot;);
		}
		nameSpan.appendChild(document.createTextNode(text));
		nameContainer.appendChild(nameSpan);
		return nameContainer;
	},

	createFormLabel : function(labelText, text, labelWidth, textWidth, backgroundColor) {
		var div = document.createElement(&quot;div&quot;);

		div.appendChild(BUI.createDIV(labelText, labelWidth, &quot;bLabel&quot;, backgroundColor));
		div.appendChild(BUI.createDIV(text, textWidth, &quot;btext&quot;, backgroundColor));
		return div.innerHTML;
	},

	createTextArea : function(labelText, text, labelWidth, rows, cols) {
		var div = document.createElement(&quot;div&quot;);
		div.appendChild(BUI.createDIV(labelText, labelWidth, &quot;bLabel&quot;));
		var textArea = document.createElement(&quot;textarea&quot;);
		textArea.setAttribute(&quot;rows&quot;, rows);
		textArea.setAttribute(&quot;cols&quot;, cols);
		textArea.appendChild(document.createTextNode(text));
		div.appendChild(textArea);
		return div.innerHTML;
	},

	showBetaWarning : function() {
		alert(&quot;ISPyB for Biosaxs version Beta has not this functionality enabled&quot;);
	},

	formatValuesErrorUnitsScientificFormat : function(val, error, unit, args) {
		var fontSize = 14;
		var decimals = 2;
		var errorFontSize = 10;
		/** line break **/
		var lineBreak = false;
		if (args != null) {
			if (args.fontSize != null) {
				fontSize = args.fontSize;
			}
			if (args.decimals != null) {
				decimals = args.decimals;
			}
			if (args.errorFontSize != null) {
				errorFontSize = args.errorFontSize;
			}
			if (args.lineBreak != null) {
				lineBreak = args.lineBreak;
			}

		}

		if (val == &quot;&quot;) {
			return &quot;&quot;;
		}
		if (error == null) {
			return &quot;&lt;span style=&#039;font-size:&quot; + fontSize + &quot;px&#039;&gt;&quot; + Number(val).toFixed(decimals) + &quot;&lt;/span&gt;&quot;;
		}
		var html = &quot;&lt;span style=&#039;font-size:&quot; + fontSize + &quot;px&#039;&gt;&quot; + Number(val).toFixed(decimals) + &quot;&lt;span style=&#039;font-size:&quot; + errorFontSize +
			   &quot;px;color:gray&#039;&gt;  &quot; + unit + &quot;&lt;/span&gt;&lt;/span&gt;&quot;;
		if (lineBreak) {
			html = html + &quot;&lt;br/&gt;&quot;;
		}
		return html + &quot;&lt;span style=&#039;font-size:&quot; + errorFontSize + &quot;px&#039;&gt; &amp;#177; &quot; + Number(Number(error).toFixed(3)).toExponential() +
			      &quot;&lt;/span&gt;&lt;/span&gt;&quot;;
	},

	formatValuesErrorUnits : function(val, error, unit, args) {
		var fontSize = 16;
		var decimals = 2;
		var errorFontSize = 10;
		/** line break **/
		var lineBreak = true;
		if (args != null) {
			if (args.fontSize != null) {
				fontSize = args.fontSize;
			}
			if (args.decimals != null) {
				decimals = args.decimals;
			}
			if (args.errorFontSize != null) {
				errorFontSize = args.errorFontSize;
			}
			if (args.lineBreak != null) {
				lineBreak = args.lineBreak;
			}

		}

		if (val == &quot;&quot;) {
			return &quot;&quot;;
		}
		if (error == null) {
			return &quot;&lt;span style=&#039;font-size:&quot; + fontSize + &quot;px&#039;&gt;&quot; + Number(val).toFixed(decimals) + &quot;&lt;/span&gt;&quot;;
		}
		var html = &quot;&lt;span style=&#039;font-size:&quot; + fontSize + &quot;px&#039;&gt;&quot; + Number(val).toFixed(decimals) + &quot;&lt;span style=&#039;font-size:&quot; + errorFontSize +
			   &quot;px;color:gray&#039;&gt;  &quot; + unit + &quot;&lt;/span&gt;&lt;/span&gt;&quot;;
		if (lineBreak) {
			html = html + &quot;&lt;br/&gt;&quot;;
		}
		return html + &quot;&lt;span style=&#039;font-size:&quot; + errorFontSize + &quot;px&#039;&gt; &amp;#177; &quot; + Number(Number(error).toFixed(8)).toExponential() +
			      &quot;&lt;/span&gt;&lt;/span&gt;&quot;;
	},

	formatValuesUnits : function(val, unit, args) {
		var fontSize = 12;
		var decimals = 2;
		var unitsFontSize = 10;
		if (args != null) {
			if (args.fontSize != null) {
				fontSize = args.fontSize;
			}
			if (args.decimals != null) {
				decimals = args.decimals;
			}
			if (args.unitsFontSize != null) {
				unitsFontSize = args.unitsFontSize;
			}

		}

		if (val == &quot;&quot;) {
			return &quot;&quot;;
		}
		
		if (unit == null) {
			return &quot;&lt;span style=&#039;font-size:&quot; + fontSize + &quot;px&#039;&gt;&quot; + Number(val).toFixed(decimals) + &quot;&lt;/span&gt;&quot;;
		}
		return &quot;&lt;span style=&#039;font-size:&quot; + fontSize + &quot;px&#039;&gt;&quot; + Number(val).toFixed(decimals) + &quot; &lt;/span&gt;&lt;span style=&#039;font-size:&quot; + unitsFontSize +
		       &quot;px;color:gray&#039;&gt;  &quot; + unit + &quot;&lt;/span&gt;&lt;/span&gt;&quot;;
	},

	getGreenButton : function(text, args) {
		var width = 70;
		var height = 20;
		if (args != null) {
			if (args.width != null) {
				width = args.width;
			}
			if (args.height != null) {
				height = args.height;
			}
		}

		return &#039;&lt;input type=&quot;button&quot; name=&quot;btn&quot; style= &quot;font-size:9px;width:&#039; + width + &#039;px; height:&#039; + height + &#039;px&quot; class=&quot;btn-green&quot; value=&quot;&#039; + text + &#039;&quot;/&gt;&#039;;
	},
	getBlueButton : function(text, args) {
			var width = 70;
			var height = 20;
			if (args != null) {
				if (args.width != null) {
					width = args.width;
				}
				if (args.height != null) {
					height = args.height;
				}
			}

			return &#039;&lt;input type=&quot;button&quot; name=&quot;btn&quot; style= &quot;font-size:9px;width:&#039; + width + &#039;px; height:&#039; + height + &#039;px&quot; class=&quot;btn-blue&quot; value=&quot;&#039; + text + &#039;&quot;/&gt;&#039;;
	},

	getSubmitGreenButton : function(text) {
		return &#039;&lt;input type=&quot;submit&quot; type=&quot;button&quot; name=&quot;btn&quot; class=&quot;btn-green&quot; value=&quot;&#039; + text + &#039;&quot;/&gt;&#039;;
	},

	getRedButton : function(text) {
		return &#039;&lt;input type=&quot;button&quot;  name=&quot;btn&quot; class=&quot;btn-red&quot; value=&quot;&#039; + text + &#039;&quot; /&gt;&#039;;

	},
	getRectangleColorDIV : function(color, height, width) {
		return &#039;&lt;div style=&quot;border: 1px solid gray;background-color: &#039; + color + &#039;; height:&#039; + height + &#039;px;width:&#039; + width + &#039;px&quot; &gt;&lt;/div&gt;&#039;;
	},

	openBufferWindow : function(bufferId) {
		var window = new BufferWindow();
		window.draw(tabs.experiment.getBufferById(bufferId), tabs.experiment);
	},

	/** Render for safety levels on grids **/
	safetyRenderer : function(val, y, specimen) {
		var color = val;
		if (val == &quot;YELLOW&quot;) {
			color = &quot;#E9AB17&quot;;
		}
		return &#039;&lt;span style=&quot;color:&#039; + color + &#039;;&quot;&gt;&#039; + val + &#039;&lt;/span&gt;&#039;;
	},

	getSampleColor : function() {
		return &#039;#CB181D&#039;;
	},

	getLightSampleColor : function() {
		return &#039;#FCBBA1&#039;;
	},

	getBufferColor : function() {
		return &#039;#6A51A3&#039;;
	},
	getLightBufferColor : function() {
		return &#039;#BCBDDC&#039;;
	},

	formatConcentration : function(val) {
		if (val != null) {
			return &quot;&lt;span style=&#039;font-size:16px&#039;&gt;&quot; + Number(val).toFixed(2) + &quot;&lt;/span&gt;&lt;span style=&#039;font-size:9px&#039;&gt; mg/ml &lt;/span&gt;&quot;;
		}
		return val;
	},

	formatVolume : function(sample, volume) {
		if (Number(sample.data.volumeToLoad) &gt; Number(sample.data.volume)) {
			return &quot;&lt;span style=&#039;color:red;font-weight:bold;&#039;&gt;&quot; + volume + &quot;&lt;/span&gt;&lt;span style=&#039;font-size:9;color:red;&#039;&gt; ï¿½l&lt;/span&gt;&quot;;
		}
		if (Number(sample.data.volumeToLoad) == Number(sample.data.volume)) {
			return &quot;&lt;span style=&#039;color:orange;font-weight:bold;&#039;&gt;&quot; + volume + &quot;&lt;/span&gt;&lt;span style=&#039;font-size:9;color:orange;&#039;&gt; ï¿½l&lt;/span&gt;&quot;;
		}
		return &quot;&lt;span&gt;&quot; + volume + &quot;&lt;/span&gt;&lt;span style=&#039;font-size:9&#039;&gt; ï¿½l&lt;/span&gt;&quot;;
	},

	getProposal : function() {
		return new Proposal();
	},

	getSampleNameRenderer : function(val, y, record) {
		var sample = record.data;
		if (record.raw.macromolecule3VO == null) {
			return &#039;&lt;span style=&quot;color:blue;&quot;&gt;&#039; + sample.code + &#039;&lt;/span&gt;&#039;;
		} else {
			return &#039;&lt;span style=&quot;color:green;&quot;&gt;&#039; + sample.code + &#039;&lt;/span&gt;&#039;;
		}
	},

	getSafetyLevels : function() {
		var safetyLevels = [];
		safetyLevels.push({
			safetyLevelId : &quot;&quot;,
			name : &quot;UNKNOWN&quot;
		});
		safetyLevels.push({
			safetyLevelId : 1,
			name : &quot;GREEN&quot;
		});
		safetyLevels.push({
			safetyLevelId : 2,
			name : &quot;YELLOW&quot;
		});
		safetyLevels.push({
			safetyLevelId : 3,
			name : &quot;RED&quot;
		});
		return safetyLevels;
	},

	getErrorColor : function() {
		return &#039;#F6CED8&#039;;
	},
	getWarningColor : function() {
		return &#039;#F5DA81&#039;;
	},
	getValidColor : function() {
		return &#039;#E0F8E0&#039;;
	},
	getSamplePlateLetters : function() {
		return [ &quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;F&quot;, &quot;G&quot;, &quot;H&quot; ];
	},
	getSamplePositionHTML : function(sample, experiment) {
		var plate = &quot;&quot;;
		var row = &quot;&quot;;
		var column = &quot;&quot;;
		var rows = this.getSamplePlateLetters();
		if (sample.sampleplateposition3VO != null) {
			var samplePlate = experiment.getSamplePlateById(sample.sampleplateposition3VO.samplePlateId);
			if (samplePlate != null) {
				plate = (samplePlate.slotPositionColumn);
				row = (sample.sampleplateposition3VO.rowNumber);
				column = (sample.sampleplateposition3VO.columnNumber);
				//				   var html = &quot;&lt;span style=&#039;font-weight:italic&#039;&gt;Plate: &lt;/span&gt;&quot; + &quot;&lt;span style=&#039;font-weight:bold&#039;&gt;&quot; + plate + &quot;&lt;/span&gt;&quot;;
				//				   html = html +  &quot;&lt;span style=&#039;font-weight:italic&#039;&gt;, Row: &lt;/span&gt;&quot; + &quot;&lt;span style=&#039;font-weight:bold&#039;&gt;&quot; +  rows[row - 1] + &quot;&lt;/span&gt;&quot;;
				//				   html = html +  &quot;&lt;span style=&#039;font-weight:italic&#039;&gt;, Column: &lt;/span&gt;&quot; + &quot;&lt;span style=&#039;font-weight:bold&#039;&gt;&quot; + column + &quot;&lt;/span&gt;&quot;;
				var html = &quot;&lt;span style=&#039;font-weight:italic&#039;&gt;Plate: &lt;/span&gt;&lt;span style=&#039;font-weight:bold&#039;&gt;&quot; + plate +
					   &quot;&lt;/span&gt;-&lt;span style=&#039;font-weight:bold&#039;&gt;&quot; + rows[row - 1] + &quot;&lt;/span&gt;&lt;span style=&#039;font-weight:bold&#039;&gt;&quot; + column + &quot;&lt;/span&gt;&quot;;
				return html;
			}
		}
		return &quot;&quot;;
	},

	getSafetyLabelName : function(safetyLevelId) {
		var safetyLevels = BUI.getSafetyLevels();
		for ( var i = 0; i &lt; safetyLevels.length; i++) {
			if (safetyLevels[i].safetyLevelId == safetyLevelId) {
				return safetyLevels[i].name;
			}
		}
		return &quot;UNKNOWN&quot;;
	},
	/** generate random id **/
	id : function() {
		var text = &quot;&quot;;
		var possible = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789&quot;;

		for ( var i = 0; i &lt; 5; i++){
			text += possible.charAt(Math.floor(Math.random() * possible.length));
		}

		return &quot;ExiSAXS&quot; + text;
	},
	showWarning : function(message) {
		Ext.Msg.show({
			title : &#039;Warning&#039;,
			msg : message,
			icon : Ext.Msg.WARNING,
			animEl : &#039;elId&#039;
		});
	},
	showError : function(message) {
		Ext.Msg.show({
			title : &#039;Warning&#039;,
			msg : message,
			icon : Ext.Msg.ERROR,
			animEl : &#039;elId&#039;
		});
	},
	getTipHTML : function(message) {
		//return &quot;&lt;div  class=&#039;panelMacro&#039; &gt;&lt;table class=&#039;tipMacro&#039;&gt;&lt;colgroup span=&#039;1&#039;&gt;&lt;col span=&#039;1&#039; width=&#039;24&#039;&gt;&lt;col span=&#039;1&#039;&gt;&lt;/colgroup&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td colspan=&#039;1&#039; rowspan=&#039;1&#039; valign=&#039;top&#039;&gt;&lt;img align=&#039;middle&#039; src=&#039;https://cwiki.apache.org/confluence/images/emoticons/check.gif&#039; width=&#039;16&#039; height=&#039;16&#039; alt=&#039;&#039; border=&#039;0&#039;&gt;&lt;/td&gt;&lt;td colspan=&#039;1&#039; rowspan=&#039;1&#039;&gt;&lt;b&gt;Tip&lt;/b&gt;&lt;br clear=&#039;none&#039;&gt;&quot;
		//		+ message + &quot;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&quot;;
		return &quot;&lt;div  class=&#039;panelMacro&#039; &gt;&lt;table class=&#039;tipMacro&#039;&gt;&lt;colgroup span=&#039;1&#039;&gt;&lt;col span=&#039;1&#039; width=&#039;24&#039;&gt;&lt;col span=&#039;1&#039;&gt;&lt;/colgroup&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td colspan=&#039;1&#039; rowspan=&#039;1&#039; valign=&#039;top&#039;&gt;&lt;/td&gt;&lt;td colspan=&#039;1&#039; rowspan=&#039;1&#039;&gt;&lt;b&gt;Tip&lt;/b&gt;&lt;br clear=&#039;none&#039;&gt;&quot; +
			message + &quot;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&quot;;
	},

	getWarningHTML : function(message) {
		return &quot;&lt;div class=&#039;panelMacro&#039; &gt;&lt;table class=&#039;warningMacro&#039;&gt;&lt;colgroup span=&#039;1&#039;&gt;&lt;col span=&#039;1&#039; width=&#039;24&#039;&gt;&lt;col span=&#039;1&#039;&gt;&lt;/colgroup&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td colspan=&#039;1&#039; rowspan=&#039;1&#039; valign=&#039;top&#039;&gt;&lt;/td&gt;&lt;td colspan=&#039;1&#039; rowspan=&#039;1&#039;&gt;&lt;b&gt;Warning&lt;/b&gt;&lt;br clear=&#039;none&#039;&gt;&quot; +
			message + &quot;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&quot;;
	},

	getErrorHTML : function(message) {
		return &quot;&lt;div class=&#039;panelMacro&#039; &gt;&lt;table class=&#039;errorMacro&#039;&gt;&lt;colgroup span=&#039;1&#039;&gt;&lt;col span=&#039;1&#039; width=&#039;24&#039;&gt;&lt;col span=&#039;1&#039;&gt;&lt;/colgroup&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td colspan=&#039;1&#039; rowspan=&#039;1&#039; valign=&#039;top&#039;&gt;&lt;img align=&#039;middle&#039; src=&#039;https://cwiki.apache.org/confluence/images/emoticons/forbidden.gif&#039; width=&#039;16&#039; height=&#039;16&#039; alt=&#039;&#039; border=&#039;0&#039;&gt;&lt;/td&gt;&lt;td colspan=&#039;1&#039; rowspan=&#039;1&#039;&gt;&lt;b&gt;Error&lt;/b&gt;&lt;br clear=&#039;none&#039;&gt;&quot; +
			message + &quot;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&quot;;
	},

	getProgessBar : function(percentage, text) {
		/** percentage 100% green **/
		var color = &quot;#0a0&quot;;

		color = &quot;#99CC00&quot;;
		if (percentage &gt; 100) {
			color = &quot;yellow&quot;;
			percentage = 100;
		}
		if (isNaN(percentage)) {
			color = &quot;white&quot;;
			percentage = 0;
		}

		var defaultText = percentage + &quot;%&quot;;
		if (text != null) {
			defaultText = text;
		}

		return &quot;&lt;div class=&#039;meter-wrap&#039;&gt;&lt;div class=&#039;meter-value&#039; style=&#039;background-color: &quot; + color + &quot; ; width: &quot; + percentage +
		       &quot;%;&#039;&gt;&lt;div class=&#039;meter-text&#039;&gt;&quot; + defaultText + &quot;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&quot;;
	},
	getFileName : function(filePath){
		if (filePath != null){
			return filePath.split(&quot;/&quot;)[filePath.split(&quot;/&quot;).length - 1];
		}
		return &quot;&quot;;
	}

};

//
//
//
//
//Ext.define(&#039;Ext.form.field.RequiredNumber&#039;, {
//	extend : &#039;Ext.form.field.Number&#039;,
//	alias : &#039;widget.requirednumberfield&#039;,
//	alternateClassName : [ &#039;Ext.form.RequiredNumberField&#039;, &#039;Ext.form.RequiredNumber&#039; ],
//	config : {
//		cls : &#039;custom-field-text-required&#039;
//	},
//
//	initComponent : function() {
//		var me = this;
//		me.callParent();
//		me.setMinValue(me.minValue);
//		me.setMaxValue(me.maxValue);
//	},
//
//	onChange : function() {
//		if ((this.getValue() == null) || String(this.getValue()).length == 0) {
//			this.addCls(&#039;custom-field-text-required&#039;);
//		} else {
//			this.removeCls(&#039;custom-field-text-required&#039;);
//		}
//		this.toggleSpinners();
//		this.callParent(arguments);
//	}
//});
//
//
//Ext.define(&#039;Ext.form.field.RequiredText&#039;, {
//	extend : &#039;Ext.form.field.Text&#039;,
//	alias : &#039;widget.requiredtext&#039;,
//	requires : [ &#039;Ext.form.field.VTypes&#039;, &#039;Ext.layout.component.field.Text&#039; ],
//	alternateClassName : [ &#039;Ext.form.RequiredTextField&#039;, &#039;Ext.form.RequiredText&#039; ],
//	config : {
//		cls : &#039;custom-field-text-required&#039;
//	},
//	initComponent : function() {
//		var me = this;
//		if (me.allowOnlyWhitespace === false) {
//			me.allowBlank = false;
//		}
//		me.callParent();
//		me.addEvents(
//		/**
//		 * @event autosize
//		 * Fires when the **{@link #autoSize}** function is triggered and the field is resized according to the
//		 * {@link #grow}/{@link #growMin}/{@link #growMax} configs as a result. This event provides a hook for the
//		 * developer to apply additional logic at runtime to resize the field if needed.
//		 * @param {Ext.form.field.Text} this This text field
//		 * @param {Number} width The new field width
//		 */
//		&#039;autosize&#039;,
//
//		/**
//		 * @event keydown
//		 * Keydown input field event. This event only fires if **{@link #enableKeyEvents}** is set to true.
//		 * @param {Ext.form.field.Text} this This text field
//		 * @param {Ext.EventObject} e
//		 */
//		&#039;keydown&#039;,
//		/**
//		 * @event keyup
//		 * Keyup input field event. This event only fires if **{@link #enableKeyEvents}** is set to true.
//		 * @param {Ext.form.field.Text} this This text field
//		 * @param {Ext.EventObject} e
//		 */
//		&#039;keyup&#039;,
//		/**
//		 * @event keypress
//		 * Keypress input field event. This event only fires if **{@link #enableKeyEvents}** is set to true.
//		 * @param {Ext.form.field.Text} this This text field
//		 * @param {Ext.EventObject} e
//		 */
//		&#039;keypress&#039;);
//		me.addStateEvents(&#039;change&#039;);
//		me.setGrowSizePolicy();
//	},
//	checkChange : function() {
//		if ((this.getValue() == null) || String(this.getValue()).length == 0) {
//			this.addCls(&#039;custom-field-text-required&#039;);
//		} else {
//			this.removeCls(&#039;custom-field-text-required&#039;);
//		}
//	}
//});







var BIOSAXS_COMBOMANAGER = {
	getComboProposal : function(args) {
		var labelWidth = null;
		var width = 400;
		
		var id =&#039;proposalIdCombo&#039;;
		if (args != null){
			if (args.labelWidth != null){
				labelWidth = args.labelWidth;
			}
			if (args.width != null){
				width = args.width;
			}
			if (args.id != null){
				id = args.id;
			}
		}
		var proposalStore = Ext.create(&#039;Ext.data.Store&#039;, {
			fields : [ &#039;code&#039;, &#039;number&#039;, &#039;title&#039;, &#039;proposalId&#039;, &#039;proposal&#039; ],
			data : EXI.proposalManager.getProposals() });

		return Ext.create(&#039;Ext.form.ComboBox&#039;, {
			fieldLabel : &#039;Proposal&#039;,
			id : id,
			width : width,
			store : proposalStore,
			labelWidth : labelWidth,
			queryMode : &#039;local&#039;,
			displayField : &#039;proposal&#039;,
			valueField : &#039;proposalId&#039; 
		});
	},
	
	getComboMacromoleculeByMacromolecules : function(macromolecules, args) {
		var labelWidth = 150;
		var margin = &quot;0 0 5 0&quot;;
		var width = 300;

		if (args != null) {
			if (args.labelWidth != null) {
				labelWidth = args.labelWidth;
			}
			if (args.margin != null) {
				margin = args.margin;
			}
			if (args.width != null) {
				width = args.width;
			}
		}

		var store = Ext.create(&#039;Ext.data.Store&#039;, {
			fields : [ &#039;macromoleculeId&#039;, &#039;acronym&#039; ],
			data : macromolecules,
			sorters : [ &#039;acronym&#039; ]
		});

		return Ext.create(&#039;Ext.form.ComboBox&#039;, {
			fieldLabel : &#039;Macromolecules&#039;,
			labelWidth : labelWidth,
			width : width,
			margin : margin,
			store : store,
			editable: false,
			queryMode : &#039;local&#039;,
			displayField : &#039;acronym&#039;,
			valueField : &#039;macromoleculeId&#039;
		});
	},
	getComboBuffers : function(buffers, args) {
		var labelWidth = 150;
		var margin = &quot;0 0 5 0&quot;;
		var width = 300;
		var fieldLabel = &#039;Buffer&#039;;

		if (args != null) {
			if (args.labelWidth != null) {
				labelWidth = args.labelWidth;
			}
			if (args.margin != null) {
				margin = args.margin;
			}
			if (args.width != null) {
				width = args.width;
			}
			if (args.noLabel != null) {
				fieldLabel = null;
			}
		}

		var store = Ext.create(&#039;Ext.data.Store&#039;, {
			fields : [ &#039;bufferId&#039;, &#039;acronym&#039; ],
			data : buffers,
			sorters : [ &#039;acronym&#039; ]
		});

		return Ext.create(&#039;Ext.form.ComboBox&#039;, {
			fieldLabel : fieldLabel,
			labelWidth : labelWidth,
			width : width,
			margin : margin,
			editable: false,
			store : store,
			queryMode : &#039;local&#039;,
			displayField : &#039;acronym&#039;,
			valueField : &#039;bufferId&#039;
		});
	},
	getComboSessions : function(sessions, args) {
		var labelWidth = 150;
		var margin = &quot;0 0 5 0&quot;;
		var width = 300;

		if (args != null) {
			if (args.labelWidth != null) {
				labelWidth = args.labelWidth;
			}
			if (args.margin != null) {
				margin = args.margin;
			}
			if (args.width != null) {
				width = args.width;
			}
		}

		for ( var i = 0; i &lt; sessions.length; i++) {
			sessions[i][&quot;startDateFormatted&quot;] = moment(sessions[i].startDate).format(&quot;MMM Do YY&quot;);
			sessions[i][&quot;sorter&quot;] = moment(sessions[i].startDate).format(&quot;YYYYMMDD&quot;);
		}

		var store = Ext.create(&#039;Ext.data.Store&#039;, {
			fields : [ &#039;sessionId&#039;, &#039;startDateFormatted&#039;, &#039;beamlineName&#039;, &#039;startDate&#039;, &#039;endDate&#039;, &#039;beamlineOperator&#039; ],
			data : sessions,
			sorters : [ &#039;sorter&#039; ]
		});

		return Ext.create(&#039;Ext.form.ComboBox&#039;, {
			fieldLabel : &#039;Sessions&#039;,
			labelWidth : labelWidth,
			width : width,
			margin : margin,
			store : store,
			queryMode : &#039;local&#039;,
			//		    	    displayField			: &#039;startDate&#039;,
			valueField : &#039;sessionId&#039;,
			// Template for the dropdown menu.
			// Note the use of &quot;x-boundlist-item&quot; class,
			// this is required to make the items selectable.
			tpl : Ext.create(&#039;Ext.XTemplate&#039;, &#039;&lt;tpl for=&quot;.&quot;&gt;&#039;,
					&#039;&lt;div class=&quot;x-boundlist-item&quot;&gt;{startDateFormatted}&lt;span style=&quot;font-weight:bold&quot;&gt; {beamlineName}&lt;/span&gt;&lt;/div&gt;&#039;, &#039;&lt;/tpl&gt;&#039;),
			// template for the content inside text field
			displayTpl : Ext.create(&#039;Ext.XTemplate&#039;, &#039;&lt;tpl for=&quot;.&quot;&gt;&#039;, &#039;{startDateFormatted}&#039;, &#039;&lt;/tpl&gt;&#039;)

		});
	},
	getComboStorageTemperature : function(args) {
		var labelWidth = 200;
		var width = 500;

		if (args != null) {
			if (args.labelWidth != null) {
				labelWidth = args.labelWidth;
			}
			if (args.width != null) {
				width = args.width;
			}
		}
		
		var storageLocations = Ext.create(&#039;Ext.data.Store&#039;, {
		    fields: [&#039;value&#039;, &#039;name&#039;],
		    data : [
		        {&quot;value&quot;:&quot;Not set&quot;, &quot;name&quot;:&quot;Not set&quot;},
		        {&quot;value&quot;:&quot;-80&quot;, &quot;name&quot;:&quot;-80&quot;},
		        {&quot;value&quot;:&quot;-20&quot;, &quot;name&quot;:&quot;-20&quot;},
		        {&quot;value&quot;:&quot;+4&quot;, &quot;name&quot;:&quot;+4&quot;},
		        {&quot;value&quot;:&quot;Room Temperature&quot;, &quot;name&quot;:&quot;Room Temperature&quot;}
		    ]
		});
		this.storageLocationComboBox = Ext.create(&#039;Ext.form.ComboBox&#039;, {
		    fieldLabel: &#039;Storage Location&#039;,
		    store: storageLocations,
		    queryMode: &#039;local&#039;,
		    labelWidth : labelWidth,
		    width : width,
		    displayField: &#039;name&#039;,
		    valueField: &#039;value&#039;,
		    value : &#039;Not set&#039;
		});
		return this.storageLocationComboBox;
	},
	getComboPuckType : function(args) {
		var labelWidth = 200;
		var width = 500;
		var margin = null;
		
		if (args != null) {
			if (args.labelWidth != null) {
				labelWidth = args.labelWidth;
			}
			if (args.width != null) {
				width = args.width;
			}
			if (args.margin != null) {
				margin = args.margin;
			}
		}
		
		var storageLocations = Ext.create(&#039;Ext.data.Store&#039;, {
		    fields: [&#039;value&#039;, &#039;name&#039;],
		    data : [
		        {&quot;value&quot;:10, &quot;name&quot;:&quot;SPINE&quot;},
		        {&quot;value&quot;:16, &quot;name&quot;:&quot;UNIPUCK&quot;}
		    ]
		});
		this.storageLocationComboBox = Ext.create(&#039;Ext.form.ComboBox&#039;, {
		    fieldLabel: &#039;Type&#039;,
		    store: storageLocations,
		    queryMode: &#039;local&#039;,
		    labelWidth : labelWidth,
		    width : width,
		    margin : margin,
		    displayField: &#039;name&#039;,
		    valueField: &#039;value&#039;,
		    value : &#039;Not set&#039;
		});
		return this.storageLocationComboBox;
	}
};</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
